# 连连 (LianLian) 使用手册

## 1. 软件简介
连连是一款开源、安全的跨平台远程控制软件，支持屏幕共享、鼠标控制和剪贴板同步。

## 2. 安装与运行

### macOS 用户
1. 下载 `LianLian_x.x.x_x64.dmg`。
2. 将 App 拖入「应用程序」文件夹。
3. **重要权限设置**：首次运行时，请前往「系统设置 -> 隐私与安全性」，确保授予 LianLian 以下权限，否则无法使用核心功能：
   - **屏幕录制**：用于被控时让对方看到屏幕。
   - **辅助功能 (Accessibility)**：用于被控时让对方控制鼠标。
4. 如果提示“无法打开，因为来自未识别的开发者”，请在隐私设置中点击“仍要打开”。

### Windows 用户
1. 下载 `LianLian_x.x.x_x64_en-US.msi` 安装包。
2. 双击安装。
3. 如果弹出 **Windows Defender SmartScreen** 拦截窗口：
   - 点击 **更多信息 (More info)**。
   - 点击 **仍要运行 (Run anyway)**。

---

## 3. 网络配置 (关键)

LianLian 需要通过一个「信令服务器」来发现彼此。默认配置为开发者的局域网服务器。

### 默认环境 (局域网)
- **信令服务器地址**: `ws://192.168.1.104:9001` (部署在开发者的 Mac 上)
- **适用场景**: 所有电脑都在同一个 WiFi/路由器的局域网下。

**如何使用：**
1. 确保 Mac (192.168.1.104) 已经启动了信令服务 (`node server/server.js`)。
2. Windows 电脑打开 App，无需修改设置，观察顶部状态。如果是 ID (如 `X7DKS2`) 则表示在线；如果是「离线」则表示连不上服务器。

### 自定义环境 (IP 变动或公网)
如果 Mac 的 IP 变了，或者你想通过互联网远程控制：
1. 点击 App 右上角的 **⚙️ (设置按钮)**。
2. 修改服务器地址：
   - **局域网**: `ws://[新IP]:9001`
   - **公网/内网穿透**: `ws://[域名或公网IP]:[端口]`
3. 点击「保存并重连」。
4. **两端必须连接同一个服务器地址才能互通！**

---

## 4. 使用步骤

### 角色 A：被控端 (我想让别人控制我)
1. 启动 App，确保状态为「在线」。
2. 将 **本机 ID** (如 `A1B2C3`) 发给伙伴。
3. 点击 **「开启屏幕共享」** 按钮。
   - macOS 会弹出权限提示，请同意。
4. 等待对方连接。

### 角色 B：主控端 (我想控制别人的电脑)
1. 启动 App，确保状态为「在线」。
2. 在下方输入框填写伙伴的 ID。
3. 点击 **「连接」**。
4. 连接成功后，画面会自动出现。
   - **鼠标控制**: 直接在画面上操作即可。
   - **剪贴板**: 复制文字后，对方电脑剪贴板会自动同步 (反之亦然)。
5. 点击上方「断开」按钮结束控制。

---

## 5. 常见问题

**Q: 连接后黑屏？**
A: 请检查被控端 (特别是 macOS) 是否授予了「屏幕录制」权限。如果没有，去系统设置勾选后**必须重启 App**。

**Q: 无法控制鼠标？**
A: 
- macOS: 检查「辅助功能」权限。
- Windows: 如果被控端以管理员权限运行了某些窗口 (如任务管理器)，LianLian 也需要以管理员权限运行才能控制它们。

**Q: 状态一直显示「离线」？**
A: 
1. 检查信令服务器是否开启。
2. 检查 IP 地址是否正确 (点击设置查看)。
3. 检查两台电脑是否互通 (比如防火墙是否拦截了 9001 端口)。
